<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon sizes=180x180 href=/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon/favicon-16x16.png><link rel=manifest href=/favicon/site.webmanifest><link rel=stylesheet type=text/css href=/style.css><title>Inria/Irisa DiverSE Team</title><link href="https://fonts.googleapis.com/css?family=Voces&display=swap" rel=stylesheet></head><body><nav id=main-menu class="shadow-sm navbar navbar-light navbar-expand-md sticky-top bg-light"><a class=navbar-brand href=/><img id=team-logo src=/images/logo-borders.svg width=80 height=80 alt="DiverSE Team"></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbar-items aria-controls=navbar-items aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbar-items><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/topics/><span>Objectives</span></a></li><li class=nav-item><a class=nav-link href=/community/><span>Community</span></a></li><li class=nav-item><a class=nav-link href=/team/><span>Team</span></a></li><li class=nav-item><a class=nav-link href=/projects/><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/talks/><span>Talks</span></a></li><li class=nav-item><a class=nav-link href=/publications/><span>Publications</span></a></li><li class=nav-item><a class=nav-link href=/posts/><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/software/><span>Software</span></a></li><li class=nav-item><a class=nav-link href=/positions/><span>Join Us!</span></a></li></ul></div></nav><main id=main-content class=bg-light><div class="container py-5 overlay"><h1>Tera-scale graph processing on the Software Heritage graph</h1><div id=page-content><h5 class=text-gray-600>by Valentin Lorentz</h5><h6 class=text-gray-600>15/02/2024</h6><h6>DiverSE Coffee</h6><h6>Rennes, France</h6><div class=presentation-image style=background-image:url(https://annex.softwareheritage.org/public/logo/software-heritage-logo-title-motto.svg)></div><div class=links></div><div><h2>Abstract</h2><p class=text-justify><p>I will present my work on the compressed graph representation of the <a href=https://www.softwareheritage.org/>Software Heritage</a> archive, whose latest version features 34 billion nodes and 520 billion edges.</p><p>I started by building on top of someone&rsquo;s PhD project (in Java), and am now rewriting it in Rust, leading to a 2 to 6x performance gain.</p><p>Lessons learned include unexpected data structures, columnar file formats (ORC), annoying multi-threading bugs, and arguments for your future language flamewars.</p><hr><p>Following Valentin&rsquo;s talk, we will have a tutorial from 14:15 to 17:30 to get started with Software Heritage&rsquo;s API. See the program below.</p><h2 id=tutorial-querying-software-heritage-archive>Tutorial: Querying Software Heritage Archive</h2><p>With the help of Valentin Lorentz, we will explore the multiple ways data can be extracted from the Software Heritage archive: REST API, GraphQL API, remote queries of swh-graph via HTTP and gRPC, swh-graph direct API from Rust, Java and Python…</p><p>Make sure that you have followed these steps before the tutorial</p><ul><li>Create an account on <a href=https://archive.softwareheritage.org/>https://archive.softwareheritage.org/</a> so you can use the API with higher rate-limits</li><li>Send your account name to Valentin to get access to <a href=https://archive.softwareheritage.org/api/1/graph/>https://archive.softwareheritage.org/api/1/graph/</a></li><li>Make sure you can ssh to the team&rsquo;s dedicated machine</li></ul><h3 id=program>Program</h3><ul><li>List all directories and files from a given Git commit</li><li>List the URL of known origins for a given Git commit</li><li>Searching for origins</li><li>Query the swh-graph server on diverci</li><li>Write your own Rust package that uses swh-graph</li><li>Find the earliest revision/release containing a particular directory/content</li></ul><h3 id=resources>Resources</h3><ul><li><a href=https://docs.softwareheritage.org/devel/swh-model/data-model.html>SWH data model</a></li></ul><p><img src=https://hedgedoc.softwareheritage.org/uploads/e36f4269-720c-40e6-a7e7-080d935833e2.png alt></p><ul><li><a href=https://docs.softwareheritage.org/devel/swh-graph/>swh-graph documentation</a> (excluding Java and Rust APIs)</li><li><a href=https://docs.softwareheritage.org/devel/swh-graph/grpc-api.html>swh-graph Using the HTTP API</a> (read first!)</li><li><a href=https://docs.softwareheritage.org/devel/swh-graph/grpc-api.html>swh-graph Using the gRPC API</a></li><li><a href=https://gitlab.softwareheritage.org/swh/devel/swh-graph/-/blob/master/proto/swhgraph.proto>swh-graph gRPC protocol full description</a></li><li><a href=https://pktz.fr/swh-graph/swh_graph/index.html>swh-graph Rust API documentation</a> (this is a temporary location for this workshop it will be on docs.rs after we release swh-graph Rust)</li><li><a href=https://docs.softwareheritage.org/user/using_data/>Data sources provided by SWH</a></li><li><a href=https://archive.softwareheritage.org/api/>Software Heritage REST API</a></li><li><a href=https://docs.softwareheritage.org/devel/swh-graphql/>Software Heritage GraphQL API</a></li><li><a href=https://github.com/cr-marcstevens/sha1collisiondetection>sha1collisiondetection</a> (as of now, <a href="https://archive.softwareheritage.org/browse/origin/directory/?origin_url=https://github.com/cr-marcstevens/sha1collisiondetection">it can’t be archived by SWH</a>, see the relevant <a href=https://gitlab.softwareheritage.org/groups/swh/-/milestones/58#tab-issues>milestone</a>)</li></ul></p></div></div></div></main><footer class="py-5 bg-dark text-light"><div class=container-fluid><div class=container><div class=row><div class="col col-sm-8"><h4>DiverSE</h4><ul id=contact-information><li><i class="fab fa-twitter"></i><a class=text-light href=https://www.twitter.com/@DiverSE_inria>@DiverSE_inria</a></li><li><i class="fab fa-youtube"></i><a class=text-light href=https://www.youtube.com/channel/UCIJQNB3HXuq3_Tl6u_tUeBA>YouTube Channel</a></li><li><i class="fab fa-github"></i><a class=text-light href=https://github.com/diverse-project>diverse-project</a></li><li><i class="fab fa-researchgate"></i><a class=text-light href=https://www.researchgate.com/lab/Olivier-Barais-Lab>Research Gate</a></li><li><i class="fas fa-at"></i><a class=text-light href=mailto:barais@irisa.fr>barais@irisa.fr</a></li><li><i class="fas fa-phone"></i><a class=text-light href=tel:+33%20%280%296.67.60.59.35>+33 (0)6.67.60.59.35</a></li><li><i class="fas fa-map-marker-alt"></i><span class=text-light>Campus de Beaulieu, 263 avenue du Général Leclerc, 35 042 RENNES cedex, France</a></li></ul></div><div class="col-sm-4 row"><ul class="navbar-nav col"><il class=nav-item><a class="text-light nav-link" href=/topics/>Objectives</a></il>
<il class=nav-item><a class="text-light nav-link" href=/community/>Community</a></il>
<il class=nav-item><a class="text-light nav-link" href=/team/>Team</a></il>
<il class=nav-item><a class="text-light nav-link" href=/projects/>Projects</a></il></ul><ul class="navbar-nav col"><il class=nav-item><a class="text-light nav-link" href=/talks/>Talks</a></il>
<il class=nav-item><a class="text-light nav-link" href=/publications/>Publications</a></il>
<il class=nav-item><a class="text-light nav-link" href=/posts/>Posts</a></il>
<il class=nav-item><a class="text-light nav-link" href=/software/>Software</a></il>
<il class=nav-item><a class="text-light nav-link" href=/positions/>Join Us!</a></il></ul></div></div></div></div></footer><script src=https://code.jquery.com/jquery-3.2.1.slim.min.js integrity=sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q crossorigin=anonymous></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js integrity=sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl crossorigin=anonymous></script></body></html>